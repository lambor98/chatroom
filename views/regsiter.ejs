<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>腾讯秋秋，开心每一天</title>
    <link rel="stylesheet" href="/stylesheets/common.css">
    <link rel="stylesheet" href="/javascripts/_light7@0.4.3@light7/dist/css/light7.min.css">
　　<script src="https://code.jquery.com/jquery-3.0.0.min.js"></script>
    <script type='text/javascript' src='/javascripts/_light7@0.4.3@light7/dist/js/light7.min.js' charset='utf-8'></script>
    
</head>
<style>
* { touch-action: none; }
.login{background: red !important;color: white;border: none;}
</style>
<body>
    <header class="bar bar-nav">
            <a href="javascript:history.back(-1)" class="button button-link button-nav pull-left back">
                <span class="icon icon-left"></span>
                返回
            </a>
            <h1 class="title">注册</h1>
    </header>
    <div class="content">
        <div class="list-block">
            <ul>
                
                <li>
                    <div class="item-content">
                        <!-- <div class="item-media"><i class="icon icon-form-name"></i></div> -->
                        <div class="item-inner">
                        <div class="item-title label">账号</div>
                        <div class="item-input">
                            <input type="text" class="username" placeholder="4-12位数字和字母组成" autocomplete="off">
                        </div>
                        </div>
                    </div>
                </li>
                <li>
                    <div class="item-content">
                        <!-- <div class="item-media"><i class="icon icon-form-password"></i></div> -->
                        <div class="item-inner">
                        <div class="item-title label">昵称</div>
                        <div class="item-input">
                            <input type="text" class="nickName" placeholder="给自己取个好名字" autocomplete="off">
                        </div>
                        </div>
                    </div>
                </li>
                <li>
                    <div class="item-content">
                        <!-- <div class="item-media"><i class="icon icon-form-password"></i></div> -->
                        <div class="item-inner">
                        <div class="item-title label">密码</div>
                        <div class="item-input">
                            <input type="password" class="pwd1" placeholder="6-12位数字和字母组成" autocomplete="off">
                        </div>
                        </div>
                    </div>
                </li>
                <li>
                    <div class="item-content">
                        <!-- <div class="item-media"><i class="icon icon-form-password"></i></div> -->
                        <div class="item-inner">
                        <div class="item-title label">密码</div>
                        <div class="item-input">
                            <input type="password" class="pwd2" placeholder="确认您的密码" autocomplete="off">
                        </div>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
        <div class="content-block">
                <p><a href="#" class="button button-big button-round login">注册</a></p>
        </div>
    
</body>
<script>
    
        $(".login").click(()=>{
            let unreg=/^[a-z$_]{1}[0-9a-z$_]{3,11}$/ig;
            let pwreg=/[a-z0-9$_]{6,12}/ig;
            if(unreg.test($(".username").val())){
                if(pwreg.test($(".pwd1").val())){
                    if($(".pwd1").val()==$(".pwd2").val()){
                        //成功发起请求
                            let data={
                                user:$(".username").val(),
                                passwd:$(".pwd1").val(),
                                nickName:$(".nickName").val()
                            }
                            $.ajax({
                                url:"/ajax/reg",
                                type:"post",
                                data,
                                success(res){
                                    if(res.code==200){
                                        $.alert(res.txt,()=>{
                                        window.location.href="/login";    
                                        })
                                    }else{
                                        $.toast(res.txt)
                                    }
                                   
                                }
                            })
                        }else{
                         
                            $.toast("两次密码输入不一致");
                        }
                }else{
                    $.toast("密码应为6-12为数字字母组成");
                }
            }else{
                $.toast("账号应为4-12为数字字母组成");
            }
          
        })
    </script>
</html>